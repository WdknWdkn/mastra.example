"use strict";(()=>{var e={};e.id=711,e.ids=[711],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},27790:e=>{e.exports=require("assert")},78893:e=>{e.exports=require("buffer")},61282:e=>{e.exports=require("child_process")},84770:e=>{e.exports=require("crypto")},17702:e=>{e.exports=require("events")},92048:e=>{e.exports=require("fs")},20629:e=>{e.exports=require("fs/promises")},32615:e=>{e.exports=require("http")},35240:e=>{e.exports=require("https")},85807:e=>{e.exports=require("module")},98216:e=>{e.exports=require("net")},19801:e=>{e.exports=require("os")},55315:e=>{e.exports=require("path")},76162:e=>{e.exports=require("stream")},74026:e=>{e.exports=require("string_decoder")},82452:e=>{e.exports=require("tls")},74175:e=>{e.exports=require("tty")},17360:e=>{e.exports=require("url")},21764:e=>{e.exports=require("util")},6162:e=>{e.exports=require("worker_threads")},71568:e=>{e.exports=require("zlib")},36694:e=>{e.exports=import("./client/lib-esm/hrana")},42780:e=>{e.exports=import("./client/lib-esm/hrana.js")},758:e=>{e.exports=import("./client/lib-esm/http")},97205:e=>{e.exports=import("./client/lib-esm/http.js")},40987:e=>{e.exports=import("./client/lib-esm/node")},47147:e=>{e.exports=import("./client/lib-esm/node.js")},72533:e=>{e.exports=import("./client/lib-esm/sql_cache")},73628:e=>{e.exports=import("./client/lib-esm/sql_cache.js")},92702:e=>{e.exports=import("./client/lib-esm/sqlite3")},28405:e=>{e.exports=import("./client/lib-esm/sqlite3.js")},70637:e=>{e.exports=import("./client/lib-esm/web")},49747:e=>{e.exports=import("./client/lib-esm/web.js")},34984:e=>{e.exports=import("./client/lib-esm/ws")},77143:e=>{e.exports=import("./client/lib-esm/ws.js")},72254:e=>{e.exports=require("node:buffer")},15673:e=>{e.exports=require("node:events")},70612:e=>{e.exports=require("node:os")},49411:e=>{e.exports=require("node:path")},99397:e=>{e.exports=require("node:timers/promises")},85493:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>_,patchFetch:()=>v,requestAsyncStorage:()=>b,routeModule:()=>q,serverHooks:()=>z,staticGenerationAsyncStorage:()=>k});var i={};r.r(i),r.d(i,{POST:()=>f});var o=r(60889),s=r(78438),n=r(17988),a=r(93609),u=r(95062),l=r(17809),p=r(77659),c=r(35340),d=r(7130);let m=(0,l.y)({id:"get-weather",description:"Get current weather for a location",inputSchema:d.z.object({location:d.z.string().describe("City name")}),outputSchema:d.z.object({temperature:d.z.number(),feelsLike:d.z.number(),humidity:d.z.number(),windSpeed:d.z.number(),windGust:d.z.number(),conditions:d.z.string(),location:d.z.string()}),execute:async({context:e})=>await w(e.location)}),h={tokyo:{temperature:22,feelsLike:23,humidity:65,windSpeed:10,windGust:15,conditions:"Partly cloudy",location:"東京"},osaka:{temperature:24,feelsLike:25,humidity:60,windSpeed:8,windGust:12,conditions:"Mainly clear",location:"大阪"},kyoto:{temperature:23,feelsLike:24,humidity:62,windSpeed:7,windGust:10,conditions:"Clear sky",location:"京都"},sapporo:{temperature:15,feelsLike:14,humidity:70,windSpeed:12,windGust:18,conditions:"Slight rain",location:"札幌"},fukuoka:{temperature:25,feelsLike:26,humidity:58,windSpeed:9,windGust:14,conditions:"Overcast",location:"福岡"}},w=async e=>{try{let t=e.toLowerCase();if(t.includes("東京")||t.includes("tokyo"))return h.tokyo;if(t.includes("大阪")||t.includes("osaka"))return h.osaka;if(t.includes("京都")||t.includes("kyoto"))return h.kyoto;if(t.includes("札幌")||t.includes("sapporo"))return h.sapporo;else if(t.includes("福岡")||t.includes("fukuoka"))return h.fukuoka;let r=`https://geocoding-api.open-meteo.com/v1/search?name=${encodeURIComponent(e)}&count=1`,i=await x(r,{},1e4),o=await i.json();if(!o.results?.[0])return console.log(`場所 '${e}' が見つかりませんでした。フォールバックデータを使用します。`),h.tokyo;let{latitude:s,longitude:n,name:a}=o.results[0],u=`https://api.open-meteo.com/v1/forecast?latitude=${s}&longitude=${n}&current=temperature_2m,apparent_temperature,relative_humidity_2m,wind_speed_10m,wind_gusts_10m,weather_code`,l=await x(u,{},1e4),p=await l.json();return{temperature:p.current.temperature_2m,feelsLike:p.current.apparent_temperature,humidity:p.current.relative_humidity_2m,windSpeed:p.current.wind_speed_10m,windGust:p.current.wind_gusts_10m,conditions:({0:"Clear sky",1:"Mainly clear",2:"Partly cloudy",3:"Overcast",45:"Foggy",48:"Depositing rime fog",51:"Light drizzle",53:"Moderate drizzle",55:"Dense drizzle",56:"Light freezing drizzle",57:"Dense freezing drizzle",61:"Slight rain",63:"Moderate rain",65:"Heavy rain",66:"Light freezing rain",67:"Heavy freezing rain",71:"Slight snow fall",73:"Moderate snow fall",75:"Heavy snow fall",77:"Snow grains",80:"Slight rain showers",81:"Moderate rain showers",82:"Violent rain showers",85:"Slight snow showers",86:"Heavy snow showers",95:"Thunderstorm",96:"Thunderstorm with slight hail",99:"Thunderstorm with heavy hail"})[p.current.weather_code]||"Unknown",location:a}}catch(e){return console.error("天気データの取得中にエラーが発生しました:",e),console.log("フォールバックデータを使用します。"),h.tokyo}},x=async(e,t={},r=5e3)=>{let i=new AbortController,o=setTimeout(()=>i.abort(),r);try{let r=await fetch(e,{...t,signal:i.signal});return clearTimeout(o),r}catch(e){throw clearTimeout(o),e}},g=new p.Py({name:"Weather Agent",instructions:`あなたは正確な天気情報を提供する役立つ天気アシスタントです。
あなたの主な機能は、ユーザーが特定の場所の天気の詳細を取得するのを支援することです。応答する際：
- 場所が提供されていない場合は、常に場所を尋ねてください
- 複数の部分を持つ場所（例：「東京都新宿区」）が与えられた場合は、最も関連性の高い部分（例：「東京」）を使用してください
- 湿度、風の状態、降水量などの関連詳細を含めてください
- 応答は簡潔かつ有益に保ってください
現在の天気データを取得するには、weatherToolを使用してください。`,model:(0,u.f)("gpt-4o-mini"),tools:{weatherTool:m}}),y=new c.d({agents:{weatherAgent:g}});async function f(e){try{let{message:t}=await e.json();if(!t||"string"!=typeof t)return a.NextResponse.json({error:"メッセージが必要です"},{status:400});let r=y.getAgent("weatherAgent"),i=await r.generate(t);return a.NextResponse.json({response:i.text})}catch(e){return console.error("エラー:",e),a.NextResponse.json({error:"リクエストの処理中にエラーが発生しました"},{status:500})}}let q=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/weather-tool/route",pathname:"/api/weather-tool",filename:"route",bundlePath:"app/api/weather-tool/route"},resolvedPagePath:"/home/ubuntu/repos/mastra.example/frontend-ui/app/api/weather-tool/route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:b,staticGenerationAsyncStorage:k,serverHooks:z}=q,_="/api/weather-tool/route";function v(){return(0,n.patchFetch)({serverHooks:z,staticGenerationAsyncStorage:k})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[651,234,396,62,622],()=>r(85493));module.exports=i})();