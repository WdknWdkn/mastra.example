# 不動産物件推薦AIエージェント

このサンプルは、Mastraを使用してユーザーの希望に合った物件を提案するAIエージェントを実装する方法を示しています。

## 概要

このエージェントは以下の機能を提供します：

1. **物件データの管理**: CSVファイルから物件データを読み込み、検索可能な形式で保存します
2. **会話履歴の管理**: ユーザーとの会話履歴を保存し、コンテキストを維持します
3. **希望条件の抽出**: 会話からユーザーの希望条件を抽出します
4. **物件検索**: 条件に基づいて物件を検索します
5. **物件推薦**: 検索結果に基づいて最適な物件を提案します

## 使用方法

### 前提条件

- Node.js v20.0+
- pnpm（推奨）または npm
- OpenAI APIキー

### セットアップ

1. `.env.example`ファイルを`.env`にコピーします：

```bash
cp .env.example .env
```

2. `.env`ファイルを編集して、OpenAI APIキーを追加します：

```env
OPENAI_API_KEY=sk-your-api-key-here
```

3. 依存関係をインストールします：

```bash
pnpm install
```

### 実行

以下のコマンドでエージェントを実行できます：

```bash
pnpm start
```

## 実装の詳細

このエージェントは、Mastraの`Agent`、`Tool`、`Step`、`Workflow`クラスを使用して実装されています。

### コンポーネント

1. **CSVパーサーツール**: 物件データのCSVファイルを読み込み、JSONに変換します
2. **物件ストア**: 物件データを保存し、検索機能を提供します
3. **会話メモリ**: ユーザーとの会話履歴を保存します
4. **検索条件抽出ツール**: 会話からユーザーの希望条件を抽出します
5. **物件検索ツール**: 条件に基づいて物件を検索します
6. **物件推薦ツール**: 検索結果に基づいて物件を提案します

### ワークフロー

エージェントは以下のステップでワークフローを実行します：

1. **データ読み込み**: CSVファイルから物件データを読み込みます
2. **会話**: ユーザーと会話して希望条件を聞き出します
3. **検索**: 希望条件に基づいて物件を検索します
4. **推薦**: 検索結果に基づいて物件を提案します

## フロントエンドとの統合

このエージェントは、Next.jsとReact、TailwindCSSを使用したフロントエンドアプリケーションと統合されています。フロントエンドは、ユーザーがエージェントと会話し、物件の提案を受け取るためのインターフェースを提供します。

## 拡張方法

このエージェントは以下の方法で拡張できます：

1. **検索アルゴリズムの改善**: より高度な検索アルゴリズムを実装して、より正確な物件マッチングを実現します
2. **ユーザープロファイリング**: ユーザーの好みを学習し、パーソナライズされた提案を行います
3. **物件データの拡充**: より多くの物件情報を追加して、より詳細な検索と提案を可能にします
4. **マルチモーダル対応**: 画像や動画などのマルチモーダルデータを活用して、より豊かな物件情報を提供します
